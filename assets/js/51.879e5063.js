(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{324:function(t,n,e){"use strict";e.r(n);var s=e(0),a=Object(s.a)({},(function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"davinci-web-项目"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#davinci-web-项目"}},[t._v("#")]),t._v(" davinci_web 项目")]),t._v(" "),e("h2",{attrs:{id:"技术栈"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#技术栈"}},[t._v("#")]),t._v(" 技术栈")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://www.tslang.cn/docs/handbook/typescript-in-5-minutes.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("TypeScript"),e("OutboundLink")],1),e("br"),t._v(" "),e("a",{attrs:{href:"https://react.docschina.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("react"),e("OutboundLink")],1),e("br"),t._v(" "),e("a",{attrs:{href:"https://www.redux.org.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("redux"),e("OutboundLink")],1),e("br"),t._v(" "),e("a",{attrs:{href:"https://www.redux.org.cn/docs/react-redux/",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-redux"),e("OutboundLink")],1),e("br"),t._v(" "),e("a",{attrs:{href:"https://redux-saga-in-chinese.js.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("redux-saga - 处理异步获取数据"),e("OutboundLink")],1),e("br"),t._v(" "),e("a",{attrs:{href:"https://3x.ant.design/index-cn",target:"_blank",rel:"noopener noreferrer"}},[t._v("Ant Design - UI组件库"),e("OutboundLink")],1),e("br"),t._v(" "),e("a",{attrs:{href:"https://www.kancloud.cn/yunye/axios/234845",target:"_blank",rel:"noopener noreferrer"}},[t._v("axios 请求库"),e("OutboundLink")],1),e("br"),t._v(" "),e("a",{attrs:{href:"http://react-guide.github.io/react-router-cn/index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-router 路由"),e("OutboundLink")],1)]),t._v(" "),e("h2",{attrs:{id:"目录结构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#目录结构"}},[t._v("#")]),t._v(" 目录结构")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/edp963/davinci/tree/dev-0.3/webapp",target:"_blank",rel:"noopener noreferrer"}},[t._v("项目地址"),e("OutboundLink")],1)]),t._v(" "),e("p",[e("img",{attrs:{src:"http://img.hecun.site/davinci_web-%E5%BE%AE%E4%BF%A1%E6%88%AA%E5%9B%BE_20200411114959-2020411115016.png",alt:"davinci_web-微信截图_20200411114959-2020411115016"}})]),t._v(" "),e("p",[t._v("路由入口文件： "),e("code",[t._v("/app/route.ts")]),e("br"),t._v("\n入口文件: "),e("code",[t._v("/app/app.tsx")])]),t._v(" "),e("h2",{attrs:{id:"react-基础"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#react-基础"}},[t._v("#")]),t._v(" react 基础")]),t._v(" "),e("h3",{attrs:{id:"组件结构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#组件结构"}},[t._v("#")]),t._v(" 组件结构")]),t._v(" "),e("p",[t._v("在整个项目中的 "),e("code",[t._v(".tsx")]),t._v(" 文件为前端页面组件, 使用 "),e("code",[t._v("typeScript")]),t._v(" 语法编写，在 render 函数中使用 "),e("code",[t._v("tsx")]),t._v(" 编写业务组件。")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Timer")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("React"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("Component")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 初始化 state 和 props 数据")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentWillMount")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求后台接口")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 渲染页面组件")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 然后构造 DOM 元素插入页面")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentDidMount")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求后台接口")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 即将从页面中删除")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("componentWillUnmount")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 清楚定时器 解除事件绑定等")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 从页面中删除")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("一般会把组件的 "),e("code",[t._v("state")]),t._v(" 的初始化工作放在 "),e("code",[t._v("constructor")]),t._v(" 里面去做；在 "),e("code",[t._v("componentWillMount")]),t._v(" 进行组件的启动工作，例如 "),e("code",[t._v("Ajax")]),t._v(" 数据拉取、定时器的启动；组件从页面上销毁的时候，有时候需要一些数据的清理，例如定时器的清理，就会放在 "),e("code",[t._v("componentWillUnmount")]),t._v(" 里面去做。")]),t._v(" "),e("h3",{attrs:{id:"数据流"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#数据流"}},[t._v("#")]),t._v(" 数据流")]),t._v(" "),e("p",[e("code",[t._v("react")]),t._v(" 是一个 数据驱动式的框架， 当数据改变时， 就会有效地更新并正确地渲染组件。")]),t._v(" "),e("p",[t._v("在项目中，组件的数据分为两部分：")]),t._v(" "),e("ol",[e("li",[e("code",[t._v("state")]),t._v(" 页面内数据：")])]),t._v(" "),e("p",[t._v("只在当前组件内使用，可通过 "),e("code",[t._v("this.setState")]),t._v(" 方法修改(此方法为异步)")]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[e("code",[t._v("props")]),t._v(" 数据：")])]),t._v(" "),e("p",[t._v("此处数据包含两部分： 父组件传递的数据和 "),e("code",[t._v("redux")]),t._v(" 中的状态管理的数据")]),t._v(" "),e("ul",[e("li",[t._v("父组件传递的数据")])]),t._v(" "),e("p",[t._v("修改父组件数据，只能使用父组件传递方法，在父组件中通过 "),e("code",[t._v("this.setState")]),t._v(" 方法修改")]),t._v(" "),e("ul",[e("li",[t._v("redux 中的状态管理的数据")])]),t._v(" "),e("p",[t._v("修改只能通过 "),e("code",[t._v("dispatch")]),t._v(" 触发相应的 "),e("code",[t._v("action")]),t._v(" 在 "),e("code",[t._v("reducer")]),t._v(" 中进行修改。关于 "),e("code",[t._v("redux")]),t._v(" 相关后面进行简单介绍。")]),t._v(" "),e("p",[e("code",[t._v("Redux")]),t._v(" 是 严格的 "),e("strong",[t._v("单向数据流")]),t._v("。")]),t._v(" "),e("p",[e("img",{attrs:{src:"http://img.hecun.site/davinci_web-4593023-4afcd50ce0354325-2020411113348.png",alt:"davinci_web-4593023-4afcd50ce0354325-2020411113348"}})]),t._v(" "),e("p",[t._v("下面以 "),e("code",[t._v("Widget")]),t._v(" 页面简单介绍下：")]),t._v(" "),e("div",{staticClass:"language-json extra-class"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[t._v("│  actions.ts       "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// actions 生成函数")]),t._v("\n│  constants.ts     "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// actionType 常量声明")]),t._v("\n│  index.tsx        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 页面入口文件")]),t._v("\n│  reducer.ts       "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 初始化 store 和 处理 reducers ")]),t._v("\n│  sagas.ts         "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 处理异步数据")]),t._v("\n│  selectors.ts     "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取 store 中的 state")]),t._v("\n│  Widget.less      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 页面样式")]),t._v("\n├─components        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 该页面所用公共组件")]),t._v("\n├─config            "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 操作面板 view 配置")]),t._v("\n│  │  index.ts      "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 入口文件")]),t._v("\n│  ├─chart          "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 图表类型")]),t._v("\n│  └─pivot          "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 透视表")]),t._v("\n└─render            "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 生成 echart 配置文件")]),t._v("\n    ├─chart         "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 图表类型")]),t._v("\n    └─pivot         "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 透视表")]),t._v("\n")])])])])}),[],!1,null,null,null);n.default=a.exports}}]);