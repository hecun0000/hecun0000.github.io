(window.webpackJsonp=window.webpackJsonp||[]).push([[5],[,,,,,,,,,,function(t,n){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,n,i){var e=i(29)("wks"),r=i(24),o=i(10).Symbol,s="function"==typeof o;(t.exports=function(t){return e[t]||(e[t]=s&&o[t]||(s?o:r)("Symbol."+t))}).store=e},function(t,n,i){t.exports=!i(13)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,n){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,n,i){var e=i(10),r=i(23),o=i(17),s=i(21),a=i(34),c=function(t,n,i){var h,l,u,f,p=t&c.F,m=t&c.G,y=t&c.S,v=t&c.P,x=t&c.B,g=m?e:y?e[n]||(e[n]={}):(e[n]||{}).prototype,d=m?r:r[n]||(r[n]={}),b=d.prototype||(d.prototype={});for(h in m&&(i=n),i)u=((l=!p&&g&&void 0!==g[h])?g:i)[h],f=x&&l?a(u,e):v&&"function"==typeof u?a(Function.call,u):u,g&&s(g,h,u,t&c.U),d[h]!=u&&o(d,h,f),v&&b[h]!=u&&(b[h]=u)};e.core=r,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,n,i){var e=i(18),r=i(42),o=i(31),s=Object.defineProperty;n.f=i(12)?Object.defineProperty:function(t,n,i){if(e(t),n=o(n,!0),e(i),r)try{return s(t,n,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[n]=i.value),t}},function(t,n){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,n,i){var e=i(15),r=i(27);t.exports=i(12)?function(t,n,i){return e.f(t,n,r(1,i))}:function(t,n,i){return t[n]=i,t}},function(t,n,i){var e=i(16);t.exports=function(t){if(!e(t))throw TypeError(t+" is not an object!");return t}},function(t,n){var i={}.hasOwnProperty;t.exports=function(t,n){return i.call(t,n)}},function(t,n,i){var e=i(49),r=i(25);t.exports=function(t){return e(r(t))}},function(t,n,i){var e=i(10),r=i(17),o=i(19),s=i(24)("src"),a=i(65),c=(""+a).split("toString");i(23).inspectSource=function(t){return a.call(t)},(t.exports=function(t,n,i,a){var h="function"==typeof i;h&&(o(i,"name")||r(i,"name",n)),t[n]!==i&&(h&&(o(i,s)||r(i,s,t[n]?""+t[n]:c.join(String(n)))),t===e?t[n]=i:a?t[n]?t[n]=i:r(t,n,i):(delete t[n],r(t,n,i)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[s]||a.call(this)}))},function(t,n,i){var e=i(26),r=Math.min;t.exports=function(t){return t>0?r(e(t),9007199254740991):0}},function(t,n){var i=t.exports={version:"2.6.10"};"number"==typeof __e&&(__e=i)},function(t,n){var i=0,e=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+e).toString(36))}},function(t,n){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,n){var i=Math.ceil,e=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?e:i)(t)}},function(t,n){t.exports=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}}},function(t,n,i){var e=i(25);t.exports=function(t){return Object(e(t))}},function(t,n,i){var e=i(23),r=i(10),o=r["__core-js_shared__"]||(r["__core-js_shared__"]={});(t.exports=function(t,n){return o[t]||(o[t]=void 0!==n?n:{})})("versions",[]).push({version:e.version,mode:i(30)?"pure":"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,n){t.exports=!1},function(t,n,i){var e=i(16);t.exports=function(t,n){if(!e(t))return t;var i,r;if(n&&"function"==typeof(i=t.toString)&&!e(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!e(r=i.call(t)))return r;if(!n&&"function"==typeof(i=t.toString)&&!e(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,n){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,n){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,n,i){var e=i(50);t.exports=function(t,n,i){if(e(t),void 0===n)return t;switch(i){case 1:return function(i){return t.call(n,i)};case 2:return function(i,e){return t.call(n,i,e)};case 3:return function(i,e,r){return t.call(n,i,e,r)}}return function(){return t.apply(n,arguments)}}},function(t,n,i){var e=i(29)("keys"),r=i(24);t.exports=function(t){return e[t]||(e[t]=r(t))}},function(t,n){t.exports={}},function(t,n,i){var e=i(44),r=i(33);t.exports=Object.keys||function(t){return e(t,r)}},,,,,function(t,n,i){t.exports=!i(12)&&!i(13)((function(){return 7!=Object.defineProperty(i(43)("div"),"a",{get:function(){return 7}}).a}))},function(t,n,i){var e=i(16),r=i(10).document,o=e(r)&&e(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,n,i){var e=i(19),r=i(20),o=i(45)(!1),s=i(35)("IE_PROTO");t.exports=function(t,n){var i,a=r(t),c=0,h=[];for(i in a)i!=s&&e(a,i)&&h.push(i);for(;n.length>c;)e(a,i=n[c++])&&(~o(h,i)||h.push(i));return h}},function(t,n,i){var e=i(20),r=i(22),o=i(46);t.exports=function(t){return function(n,i,s){var a,c=e(n),h=r(c.length),l=o(s,h);if(t&&i!=i){for(;h>l;)if((a=c[l++])!=a)return!0}else for(;h>l;l++)if((t||l in c)&&c[l]===i)return t||l||0;return!t&&-1}}},function(t,n,i){var e=i(26),r=Math.max,o=Math.min;t.exports=function(t,n){return(t=e(t))<0?r(t+n,0):o(t,n)}},,function(t,n,i){var e=i(44),r=i(33).concat("length","prototype");n.f=Object.getOwnPropertyNames||function(t){return e(t,r)}},function(t,n,i){var e=i(32);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==e(t)?t.split(""):Object(t)}},function(t,n){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,n,i){var e=i(18),r=i(66),o=i(33),s=i(35)("IE_PROTO"),a=function(){},c=function(){var t,n=i(43)("iframe"),e=o.length;for(n.style.display="none",i(67).appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;e--;)delete c.prototype[o[e]];return c()};t.exports=Object.create||function(t,n){var i;return null!==t?(a.prototype=e(t),i=new a,a.prototype=null,i[s]=t):i=c(),void 0===n?i:r(i,n)}},function(t,n,i){var e=i(15).f,r=i(19),o=i(11)("toStringTag");t.exports=function(t,n,i){t&&!r(t=i?t:t.prototype,o)&&e(t,o,{configurable:!0,value:n})}},function(t,n,i){"use strict";var e=i(13);t.exports=function(t,n){return!!t&&e((function(){n?t.call(null,(function(){}),1):t.call(null)}))}},function(t,n,i){var e=i(55),r=i(27),o=i(20),s=i(31),a=i(19),c=i(42),h=Object.getOwnPropertyDescriptor;n.f=i(12)?h:function(t,n){if(t=o(t),n=s(n,!0),c)try{return h(t,n)}catch(t){}if(a(t,n))return r(!e.f.call(t,n),t[n])}},function(t,n){n.f={}.propertyIsEnumerable},,,,function(t,n,i){},function(t,n,i){var e=i(11)("unscopables"),r=Array.prototype;null==r[e]&&i(17)(r,e,{}),t.exports=function(t){r[e][t]=!0}},function(t,n,i){var e=i(34),r=i(49),o=i(28),s=i(22),a=i(83);t.exports=function(t,n){var i=1==t,c=2==t,h=3==t,l=4==t,u=6==t,f=5==t||u,p=n||a;return function(n,a,m){for(var y,v,x=o(n),g=r(x),d=e(a,m,3),b=s(g.length),M=0,w=i?p(n,b):c?p(n,0):void 0;b>M;M++)if((f||M in g)&&(v=d(y=g[M],M,x),t))if(i)w[M]=v;else if(v)switch(t){case 3:return!0;case 5:return y;case 6:return M;case 2:w.push(y)}else if(l)return!1;return u?-1:h||l?l:w}}},,,,function(t,n,i){t.exports=i(29)("native-function-to-string",Function.toString)},function(t,n,i){var e=i(15),r=i(18),o=i(37);t.exports=i(12)?Object.defineProperties:function(t,n){r(t);for(var i,s=o(n),a=s.length,c=0;a>c;)e.f(t,i=s[c++],n[i]);return t}},function(t,n,i){var e=i(10).document;t.exports=e&&e.documentElement},function(t,n,i){var e=i(32);t.exports=Array.isArray||function(t){return"Array"==e(t)}},function(t,n,i){"use strict";var e=i(18);t.exports=function(){var t=e(this),n="";return t.global&&(n+="g"),t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),t.sticky&&(n+="y"),n}},,,,function(t,n,i){var e=i(19),r=i(28),o=i(35)("IE_PROTO"),s=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),e(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},,function(t,n,i){var e=i(32),r=i(11)("toStringTag"),o="Arguments"==e(function(){return arguments}());t.exports=function(t){var n,i,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),r))?i:o?e(n):"Object"==(s=e(n))&&"function"==typeof n.callee?"Arguments":s}},,,,function(t,n,i){"use strict";var e=i(60),r=i(80),o=i(36),s=i(20);t.exports=i(81)(Array,"Array",(function(t,n){this._t=s(t),this._i=0,this._k=n}),(function(){var t=this._t,n=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,r(1)):r(0,"keys"==n?i:"values"==n?t[i]:[i,t[i]])}),"values"),o.Arguments=o.Array,e("keys"),e("values"),e("entries")},function(t,n){t.exports=function(t,n){return{value:n,done:!!t}}},function(t,n,i){"use strict";var e=i(30),r=i(14),o=i(21),s=i(17),a=i(36),c=i(82),h=i(52),l=i(73),u=i(11)("iterator"),f=!([].keys&&"next"in[].keys()),p=function(){return this};t.exports=function(t,n,i,m,y,v,x){c(i,n,m);var g,d,b,M=function(t){if(!f&&t in R)return R[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},w=n+" Iterator",S="values"==y,_=!1,R=t.prototype,z=R[u]||R["@@iterator"]||y&&R[y],E=z||M(y),A=y?S?M("entries"):E:void 0,P="Array"==n&&R.entries||z;if(P&&(b=l(P.call(new t)))!==Object.prototype&&b.next&&(h(b,w,!0),e||"function"==typeof b[u]||s(b,u,p)),S&&z&&"values"!==z.name&&(_=!0,E=function(){return z.call(this)}),e&&!x||!f&&!_&&R[u]||s(R,u,E),a[n]=E,a[w]=p,y)if(g={values:S?E:M("values"),keys:v?E:M("keys"),entries:A},x)for(d in g)d in R||o(R,d,g[d]);else r(r.P+r.F*(f||_),n,g);return g}},function(t,n,i){"use strict";var e=i(51),r=i(27),o=i(52),s={};i(17)(s,i(11)("iterator"),(function(){return this})),t.exports=function(t,n,i){t.prototype=e(s,{next:r(1,i)}),o(t,n+" Iterator")}},function(t,n,i){var e=i(84);t.exports=function(t,n){return new(e(t))(n)}},function(t,n,i){var e=i(16),r=i(68),o=i(11)("species");t.exports=function(t){var n;return r(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!r(n.prototype)||(n=void 0),e(n)&&null===(n=n[o])&&(n=void 0)),void 0===n?Array:n}},function(t,n,i){var e=i(14),r=i(13),o=i(25),s=/"/g,a=function(t,n,i,e){var r=String(o(t)),a="<"+n;return""!==i&&(a+=" "+i+'="'+String(e).replace(s,"&quot;")+'"'),a+">"+r+"</"+n+">"};t.exports=function(t,n){var i={};i[t]=n(a),e(e.P+e.F*r((function(){var n=""[t]('"');return n!==n.toLowerCase()||n.split('"').length>3})),"String",i)}},,,,,,,,function(t,n,i){"use strict";var e=i(10),r=i(15),o=i(12),s=i(11)("species");t.exports=function(t){var n=e[t];o&&n&&!n[s]&&r.f(n,s,{configurable:!0,get:function(){return this}})}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,n,i){"use strict";var e=i(59);i.n(e).a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,n,i){"use strict";i.r(n);i(158),i(164),i(165),i(166),i(167),i(168),i(169);var e=e||{};e.Color=function(t){this.autoUpdate=!0,this.setHex(t)},e.Color.prototype={setRGBA:function(t,n,i,e){this.r=t,this.g=n,this.b=i,this.a=e,this.autoUpdate&&(this.updateHex(),this.updateStyleString())},setHex:function(t){this.hex=t,this.autoUpdate&&(this.updateRGBA(),this.updateStyleString())},copyRGB:function(t){this.r=t.r,this.g=t.g,this.b=t.b},copyRGBA:function(t){this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a},multiplySelfRGB:function(t){this.r*=t.r,this.g*=t.g,this.b*=t.b},updateHex:function(){this.hex=Math.floor(255*this.a)<<24|Math.floor(255*this.r)<<16|Math.floor(255*this.g)<<8|Math.floor(255*this.b)},updateRGBA:function(){this.a=(this.hex>>24&255)/255,this.r=(this.hex>>16&255)/255,this.g=(this.hex>>8&255)/255,this.b=(255&this.hex)/255},updateStyleString:function(){this.__styleString="rgba("+Math.floor(255*this.r)+","+Math.floor(255*this.g)+","+Math.floor(255*this.b)+","+this.a+")"},toString:function(){return"THREE.Color ( r: "+this.r+", g: "+this.g+", b: "+this.b+", a: "+this.a+", hex: "+this.hex+" )"}},e.Vector2=function(t,n){this.x=t||0,this.y=n||0},e.Vector2.prototype={set:function(t,n){return this.x=t,this.y=n,this},copy:function(t){return this.x=t.x,this.y=t.y,this},addSelf:function(t){return this.x+=t.x,this.y+=t.y,this},add:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this},subSelf:function(t){return this.x-=t.x,this.y-=t.y,this},sub:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},unit:function(){return this.multiplyScalar(1/this.length()),this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthSq:function(){return this.x*this.x+this.y*this.y},negate:function(){return this.x=-this.x,this.y=-this.y,this},clone:function(){return new e.Vector2(this.x,this.y)},toString:function(){return"THREE.Vector2 ("+this.x+", "+this.y+")"}},e.Vector3=function(t,n,i){this.x=t||0,this.y=n||0,this.z=i||0},e.Vector3.prototype={set:function(t,n,i){return this.x=t,this.y=n,this.z=i,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this},addSelf:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},sub:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this},subSelf:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this},cross:function(t,n){return this.x=t.y*n.z-t.z*n.y,this.y=t.z*n.x-t.x*n.z,this.z=t.x*n.y-t.y*n.x,this},crossSelf:function(t){var n=this.x,i=this.y,e=this.z;return this.x=i*t.z-e*t.y,this.y=e*t.x-n*t.z,this.z=n*t.y-i*t.x,this},multiplySelf:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},divideScalar:function(t){return this.x/=t,this.y/=t,this.z/=t,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var n=this.x-t.x,i=this.y-t.y,e=this.z-t.z;return n*n+i*i+e*e},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},normalize:function(){return this.length()>0?this.multiplyScalar(1/this.length()):this.multiplyScalar(0),this},setLength:function(t){return this.normalize().multiplyScalar(t)},isZero:function(){var t=1e-4;return Math.abs(this.x)<t&&Math.abs(this.y)<t&&Math.abs(this.z)<t},clone:function(){return new e.Vector3(this.x,this.y,this.z)},toString:function(){return"THREE.Vector3 ( "+this.x+", "+this.y+", "+this.z+" )"}},e.Vector4=function(t,n,i,e){this.x=t||0,this.y=n||0,this.z=i||0,this.w=e||1},e.Vector4.prototype={set:function(t,n,i,e){return this.x=t,this.y=n,this.z=i,this.w=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},add:function(t,n){return this.x=t.x+n.x,this.y=t.y+n.y,this.z=t.z+n.z,this.w=t.w+n.w,this},addSelf:function(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this},sub:function(t,n){return this.x=t.x-n.x,this.y=t.y-n.y,this.z=t.z-n.z,this.w=t.w-n.w,this},subSelf:function(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this},clone:function(){return new e.Vector4(this.x,this.y,this.z,this.w)},toString:function(){return"THREE.Vector4 ("+this.x+", "+this.y+", "+this.z+", "+this.w+")"}},e.Rectangle=function(){var t,n,i,e,r,o,s=!0;function a(){r=i-t,o=e-n}this.getX=function(){return t},this.getY=function(){return n},this.getWidth=function(){return r},this.getHeight=function(){return o},this.getX1=function(){return t},this.getY1=function(){return n},this.getX2=function(){return i},this.getY2=function(){return e},this.set=function(r,o,c,h){s=!1,t=r,n=o,i=c,e=h,a()},this.addPoint=function(r,o){s?(s=!1,t=r,n=o,i=r,e=o):(t=Math.min(t,r),n=Math.min(n,o),i=Math.max(i,r),e=Math.max(e,o)),a()},this.addRectangle=function(r){s?(s=!1,t=r.getX1(),n=r.getY1(),i=r.getX2(),e=r.getY2()):(t=Math.min(t,r.getX1()),n=Math.min(n,r.getY1()),i=Math.max(i,r.getX2()),e=Math.max(e,r.getY2())),a()},this.inflate=function(r){t-=r,n-=r,i+=r,e+=r,a()},this.minSelf=function(r){t=Math.max(t,r.getX1()),n=Math.max(n,r.getY1()),i=Math.min(i,r.getX2()),e=Math.min(e,r.getY2()),a()},this.instersects=function(r){return Math.min(i,r.getX2())-Math.max(t,r.getX1())>=0&&Math.min(e,r.getY2())-Math.max(n,r.getY1())>=0},this.empty=function(){s=!0,t=0,n=0,i=0,e=0,a()},this.isEmpty=function(){return s},this.toString=function(){return"THREE.Rectangle (x1: "+t+", y1: "+e+", x2: "+i+", y1: "+n+", width: "+r+", height: "+o+")"}},e.Matrix3=function(){this.m=[]},e.Matrix3.prototype={transpose:function(){var t;return t=this.m[1],this.m[1]=this.m[3],this.m[3]=t,t=this.m[2],this.m[2]=this.m[6],this.m[6]=t,t=this.m[5],this.m[5]=this.m[7],this.m[7]=t,this}},e.Matrix4=function(){this._x=new e.Vector3,this._y=new e.Vector3,this._z=new e.Vector3},e.Matrix4.prototype={n11:1,n12:0,n13:0,n14:0,n21:0,n22:1,n23:0,n24:0,n31:0,n32:0,n33:1,n34:0,n41:0,n42:0,n43:0,n44:1,identity:function(){this.n11=1,this.n12=0,this.n13=0,this.n14=0,this.n21=0,this.n22=1,this.n23=0,this.n24=0,this.n31=0,this.n32=0,this.n33=1,this.n34=0,this.n41=0,this.n42=0,this.n43=0,this.n44=1},copy:function(t){this.n11=t.n11,this.n12=t.n12,this.n13=t.n13,this.n14=t.n14,this.n21=t.n21,this.n22=t.n22,this.n23=t.n23,this.n24=t.n24,this.n31=t.n31,this.n32=t.n32,this.n33=t.n33,this.n34=t.n34,this.n41=t.n41,this.n42=t.n42,this.n43=t.n43,this.n44=t.n44},lookAt:function(t,n,i){var e=this._x,r=this._y,o=this._z;o.sub(t,n),o.normalize(),e.cross(i,o),e.normalize(),r.cross(o,e),r.normalize(),this.n11=e.x,this.n12=e.y,this.n13=e.z,this.n14=-e.dot(t),this.n21=r.x,this.n22=r.y,this.n23=r.z,this.n24=-r.dot(t),this.n31=o.x,this.n32=o.y,this.n33=o.z,this.n34=-o.dot(t),this.n41=0,this.n42=0,this.n43=0,this.n44=1},transform:function(t){var n=t.x,i=t.y,e=t.z,r=t.w?t.w:1;return t.x=this.n11*n+this.n12*i+this.n13*e+this.n14*r,t.y=this.n21*n+this.n22*i+this.n23*e+this.n24*r,t.z=this.n31*n+this.n32*i+this.n33*e+this.n34*r,r=this.n41*n+this.n42*i+this.n43*e+this.n44*r,t.w?t.w=r:(t.x=t.x/r,t.y=t.y/r,t.z=t.z/r),t},crossVector:function(t){var n=new e.Vector4;return n.x=this.n11*t.x+this.n12*t.y+this.n13*t.z+this.n14*t.w,n.y=this.n21*t.x+this.n22*t.y+this.n23*t.z+this.n24*t.w,n.z=this.n31*t.x+this.n32*t.y+this.n33*t.z+this.n34*t.w,n.w=t.w?this.n41*t.x+this.n42*t.y+this.n43*t.z+this.n44*t.w:1,n},multiply:function(t,n){this.n11=t.n11*n.n11+t.n12*n.n21+t.n13*n.n31+t.n14*n.n41,this.n12=t.n11*n.n12+t.n12*n.n22+t.n13*n.n32+t.n14*n.n42,this.n13=t.n11*n.n13+t.n12*n.n23+t.n13*n.n33+t.n14*n.n43,this.n14=t.n11*n.n14+t.n12*n.n24+t.n13*n.n34+t.n14*n.n44,this.n21=t.n21*n.n11+t.n22*n.n21+t.n23*n.n31+t.n24*n.n41,this.n22=t.n21*n.n12+t.n22*n.n22+t.n23*n.n32+t.n24*n.n42,this.n23=t.n21*n.n13+t.n22*n.n23+t.n23*n.n33+t.n24*n.n43,this.n24=t.n21*n.n14+t.n22*n.n24+t.n23*n.n34+t.n24*n.n44,this.n31=t.n31*n.n11+t.n32*n.n21+t.n33*n.n31+t.n34*n.n41,this.n32=t.n31*n.n12+t.n32*n.n22+t.n33*n.n32+t.n34*n.n42,this.n33=t.n31*n.n13+t.n32*n.n23+t.n33*n.n33+t.n34*n.n43,this.n34=t.n31*n.n14+t.n32*n.n24+t.n33*n.n34+t.n34*n.n44,this.n41=t.n41*n.n11+t.n42*n.n21+t.n43*n.n31+t.n44*n.n41,this.n42=t.n41*n.n12+t.n42*n.n22+t.n43*n.n32+t.n44*n.n42,this.n43=t.n41*n.n13+t.n42*n.n23+t.n43*n.n33+t.n44*n.n43,this.n44=t.n41*n.n14+t.n42*n.n24+t.n43*n.n34+t.n44*n.n44},multiplySelf:function(t){var n=this.n11,i=this.n12,e=this.n13,r=this.n14,o=this.n21,s=this.n22,a=this.n23,c=this.n24,h=this.n31,l=this.n32,u=this.n33,f=this.n34,p=this.n41,m=this.n42,y=this.n43,v=this.n44;this.n11=n*t.n11+i*t.n21+e*t.n31+r*t.n41,this.n12=n*t.n12+i*t.n22+e*t.n32+r*t.n42,this.n13=n*t.n13+i*t.n23+e*t.n33+r*t.n43,this.n14=n*t.n14+i*t.n24+e*t.n34+r*t.n44,this.n21=o*t.n11+s*t.n21+a*t.n31+c*t.n41,this.n22=o*t.n12+s*t.n22+a*t.n32+c*t.n42,this.n23=o*t.n13+s*t.n23+a*t.n33+c*t.n43,this.n24=o*t.n14+s*t.n24+a*t.n34+c*t.n44,this.n31=h*t.n11+l*t.n21+u*t.n31+f*t.n41,this.n32=h*t.n12+l*t.n22+u*t.n32+f*t.n42,this.n33=h*t.n13+l*t.n23+u*t.n33+f*t.n43,this.n34=h*t.n14+l*t.n24+u*t.n34+f*t.n44,this.n41=p*t.n11+m*t.n21+y*t.n31+v*t.n41,this.n42=p*t.n12+m*t.n22+y*t.n32+v*t.n42,this.n43=p*t.n13+m*t.n23+y*t.n33+v*t.n43,this.n44=p*t.n14+m*t.n24+y*t.n34+v*t.n44},multiplyScalar:function(t){this.n11*=t,this.n12*=t,this.n13*=t,this.n14*=t,this.n21*=t,this.n22*=t,this.n23*=t,this.n24*=t,this.n31*=t,this.n32*=t,this.n33*=t,this.n34*=t,this.n41*=t,this.n42*=t,this.n43*=t,this.n44*=t},determinant:function(){return this.n14*this.n23*this.n32*this.n41-this.n13*this.n24*this.n32*this.n41-this.n14*this.n22*this.n33*this.n41+this.n12*this.n24*this.n33*this.n41+this.n13*this.n22*this.n34*this.n41-this.n12*this.n23*this.n34*this.n41-this.n14*this.n23*this.n31*this.n42+this.n13*this.n24*this.n31*this.n42+this.n14*this.n21*this.n33*this.n42-this.n11*this.n24*this.n33*this.n42-this.n13*this.n21*this.n34*this.n42+this.n11*this.n23*this.n34*this.n42+this.n14*this.n22*this.n31*this.n43-this.n12*this.n24*this.n31*this.n43-this.n14*this.n21*this.n32*this.n43+this.n11*this.n24*this.n32*this.n43+this.n12*this.n21*this.n34*this.n43-this.n11*this.n22*this.n34*this.n43-this.n13*this.n22*this.n31*this.n44+this.n12*this.n23*this.n31*this.n44+this.n13*this.n21*this.n32*this.n44-this.n11*this.n23*this.n32*this.n44-this.n12*this.n21*this.n33*this.n44+this.n11*this.n22*this.n33*this.n44},transpose:function(){function t(t,n,i){var e=t[n];t[n]=t[i],t[i]=e}return t(this,"n21","n12"),t(this,"n31","n13"),t(this,"n32","n23"),t(this,"n41","n14"),t(this,"n42","n24"),t(this,"n43","n34"),this},clone:function(){var t=new e.Matrix4;return t.n11=this.n11,t.n12=this.n12,t.n13=this.n13,t.n14=this.n14,t.n21=this.n21,t.n22=this.n22,t.n23=this.n23,t.n24=this.n24,t.n31=this.n31,t.n32=this.n32,t.n33=this.n33,t.n34=this.n34,t.n41=this.n41,t.n42=this.n42,t.n43=this.n43,t.n44=this.n44,t},flatten:function(){return[this.n11,this.n21,this.n31,this.n41,this.n12,this.n22,this.n32,this.n42,this.n13,this.n23,this.n33,this.n43,this.n14,this.n24,this.n34,this.n44]},toString:function(){return"| "+this.n11+" "+this.n12+" "+this.n13+" "+this.n14+" |\n| "+this.n21+" "+this.n22+" "+this.n23+" "+this.n24+" |\n| "+this.n31+" "+this.n32+" "+this.n33+" "+this.n34+" |\n| "+this.n41+" "+this.n42+" "+this.n43+" "+this.n44+" |"}},e.Matrix4.translationMatrix=function(t,n,i){var r=new e.Matrix4;return r.n14=t,r.n24=n,r.n34=i,r},e.Matrix4.scaleMatrix=function(t,n,i){var r=new e.Matrix4;return r.n11=t,r.n22=n,r.n33=i,r},e.Matrix4.rotationXMatrix=function(t){var n=new e.Matrix4;return n.n22=n.n33=Math.cos(t),n.n32=Math.sin(t),n.n23=-n.n32,n},e.Matrix4.rotationYMatrix=function(t){var n=new e.Matrix4;return n.n11=n.n33=Math.cos(t),n.n13=Math.sin(t),n.n31=-n.n13,n},e.Matrix4.rotationZMatrix=function(t){var n=new e.Matrix4;return n.n11=n.n22=Math.cos(t),n.n21=Math.sin(t),n.n12=-n.n21,n},e.Matrix4.rotationAxisAngleMatrix=function(t,n){var i=new e.Matrix4,r=Math.cos(n),o=Math.sin(n),s=1-r,a=t.x,c=t.y,h=t.z;return i.n11=s*a*a+r,i.n12=s*a*c-o*h,i.n13=s*a*h+o*c,i.n21=s*a*c+o*h,i.n22=s*c*c+r,i.n23=s*c*h-o*a,i.n31=s*a*h-o*c,i.n32=s*c*h+o*a,i.n33=s*h*h+r,i},e.Matrix4.makeInvert=function(t){var n=new e.Matrix4;return n.n11=t.n23*t.n34*t.n42-t.n24*t.n33*t.n42+t.n24*t.n32*t.n43-t.n22*t.n34*t.n43-t.n23*t.n32*t.n44+t.n22*t.n33*t.n44,n.n12=t.n14*t.n33*t.n42-t.n13*t.n34*t.n42-t.n14*t.n32*t.n43+t.n12*t.n34*t.n43+t.n13*t.n32*t.n44-t.n12*t.n33*t.n44,n.n13=t.n13*t.n24*t.n42-t.n14*t.n23*t.n42+t.n14*t.n22*t.n43-t.n12*t.n24*t.n43-t.n13*t.n22*t.n44+t.n12*t.n23*t.n44,n.n14=t.n14*t.n23*t.n32-t.n13*t.n24*t.n32-t.n14*t.n22*t.n33+t.n12*t.n24*t.n33+t.n13*t.n22*t.n34-t.n12*t.n23*t.n34,n.n21=t.n24*t.n33*t.n41-t.n23*t.n34*t.n41-t.n24*t.n31*t.n43+t.n21*t.n34*t.n43+t.n23*t.n31*t.n44-t.n21*t.n33*t.n44,n.n22=t.n13*t.n34*t.n41-t.n14*t.n33*t.n41+t.n14*t.n31*t.n43-t.n11*t.n34*t.n43-t.n13*t.n31*t.n44+t.n11*t.n33*t.n44,n.n23=t.n14*t.n23*t.n41-t.n13*t.n24*t.n41-t.n14*t.n21*t.n43+t.n11*t.n24*t.n43+t.n13*t.n21*t.n44-t.n11*t.n23*t.n44,n.n24=t.n13*t.n24*t.n31-t.n14*t.n23*t.n31+t.n14*t.n21*t.n33-t.n11*t.n24*t.n33-t.n13*t.n21*t.n34+t.n11*t.n23*t.n34,n.n31=t.n22*t.n34*t.n41-t.n24*t.n32*t.n41+t.n24*t.n31*t.n42-t.n21*t.n34*t.n42-t.n22*t.n31*t.n44+t.n21*t.n32*t.n44,n.n32=t.n14*t.n32*t.n41-t.n12*t.n34*t.n41-t.n14*t.n31*t.n42+t.n11*t.n34*t.n42+t.n12*t.n31*t.n44-t.n11*t.n32*t.n44,n.n33=t.n13*t.n24*t.n41-t.n14*t.n22*t.n41+t.n14*t.n21*t.n42-t.n11*t.n24*t.n42-t.n12*t.n21*t.n44+t.n11*t.n22*t.n44,n.n34=t.n14*t.n22*t.n31-t.n12*t.n24*t.n31-t.n14*t.n21*t.n32+t.n11*t.n24*t.n32+t.n12*t.n21*t.n34-t.n11*t.n22*t.n34,n.n41=t.n23*t.n32*t.n41-t.n22*t.n33*t.n41-t.n23*t.n31*t.n42+t.n21*t.n33*t.n42+t.n22*t.n31*t.n43-t.n21*t.n32*t.n43,n.n42=t.n12*t.n33*t.n41-t.n13*t.n32*t.n41+t.n13*t.n31*t.n42-t.n11*t.n33*t.n42-t.n12*t.n31*t.n43+t.n11*t.n32*t.n43,n.n43=t.n13*t.n22*t.n41-t.n12*t.n23*t.n41-t.n13*t.n21*t.n42+t.n11*t.n23*t.n42+t.n12*t.n21*t.n43-t.n11*t.n22*t.n43,n.n44=t.n12*t.n23*t.n31-t.n13*t.n22*t.n31+t.n13*t.n21*t.n32-t.n11*t.n23*t.n32-t.n12*t.n21*t.n33+t.n11*t.n22*t.n33,n.multiplyScalar(1/t.determinant()),n},e.Matrix4.makeInvert3x3=function(t){var n,i=t.flatten(),r=new e.Matrix3,o=i[10]*i[5]-i[6]*i[9],s=-i[10]*i[1]+i[2]*i[9],a=i[6]*i[1]-i[2]*i[5],c=-i[10]*i[4]+i[6]*i[8],h=i[10]*i[0]-i[2]*i[8],l=-i[6]*i[0]+i[2]*i[4],u=i[9]*i[4]-i[5]*i[8],f=-i[9]*i[0]+i[1]*i[8],p=i[5]*i[0]-i[1]*i[4],m=i[0]*o+i[1]*c+i[2]*u;if(0==m)throw"matrix not invertible";return n=1/m,r.m[0]=n*o,r.m[1]=n*s,r.m[2]=n*a,r.m[3]=n*c,r.m[4]=n*h,r.m[5]=n*l,r.m[6]=n*u,r.m[7]=n*f,r.m[8]=n*p,r},e.Matrix4.makeFrustum=function(t,n,i,r,o,s){var a,c,h,l,u,f,p;return c=2*o/(n-t),h=2*o/(r-i),l=(n+t)/(n-t),u=(r+i)/(r-i),f=-(s+o)/(s-o),p=-2*s*o/(s-o),(a=new e.Matrix4).n11=c,a.n12=0,a.n13=l,a.n14=0,a.n21=0,a.n22=h,a.n23=u,a.n24=0,a.n31=0,a.n32=0,a.n33=f,a.n34=p,a.n41=0,a.n42=0,a.n43=-1,a.n44=0,a},e.Matrix4.makePerspective=function(t,n,i,r){var o,s,a,c;return a=(s=-(o=i*Math.tan(t*Math.PI/360)))*n,c=o*n,e.Matrix4.makeFrustum(a,c,s,o,i,r)},e.Matrix4.makeOrtho=function(t,n,i,r,o,s){var a,c,h,l,u,f,p;return c=(n+t)/(u=n-t),h=(r+i)/(f=r-i),l=(s+o)/(p=s-o),(a=new e.Matrix4).n11=2/u,a.n12=0,a.n13=0,a.n14=-c,a.n21=0,a.n22=2/f,a.n23=0,a.n24=-h,a.n31=0,a.n32=0,a.n33=-2/p,a.n34=-l,a.n41=0,a.n42=0,a.n43=0,a.n44=1,a},e.Vertex=function(t,n){this.position=t||new e.Vector3,this.positionWorld=new e.Vector3,this.positionScreen=new e.Vector3,this.normal=n||new e.Vector3,this.normalWorld=new e.Vector3,this.normalScreen=new e.Vector3,this.__visible=!0},e.Vertex.prototype={toString:function(){return"THREE.Vertex ( position: "+this.position+", normal: "+this.normal+" )"}},e.Face3=function(t,n,i,r,o){this.a=t,this.b=n,this.c=i,this.centroid=new e.Vector3,this.normal=r instanceof e.Vector3?r:new e.Vector3,this.vertexNormals=r instanceof Array?r:[],this.material=o instanceof Array?o:[o]},e.Face3.prototype={toString:function(){return"THREE.Face3 ( "+this.a+", "+this.b+", "+this.c+" )"}},e.Face4=function(t,n,i,r,o,s){this.a=t,this.b=n,this.c=i,this.d=r,this.centroid=new e.Vector3,this.normal=o instanceof e.Vector3?o:new e.Vector3,this.vertexNormals=o instanceof Array?o:[],this.material=s instanceof Array?s:[s]},e.Face4.prototype={toString:function(){return"THREE.Face4 ( "+this.a+", "+this.b+", "+this.c+" "+this.d+" )"}},e.UV=function(t,n){this.u=t||0,this.v=n||0},e.UV.prototype={copy:function(t){this.u=t.u,this.v=t.v},toString:function(){return"THREE.UV ("+this.u+", "+this.v+")"}},e.Geometry=function(){this.vertices=[],this.faces=[],this.uvs=[]},e.Geometry.prototype={computeCentroids:function(){var t,n,i;for(t=0,n=this.faces.length;t<n;t++)(i=this.faces[t]).centroid.set(0,0,0),i instanceof e.Face3?(i.centroid.addSelf(this.vertices[i.a].position),i.centroid.addSelf(this.vertices[i.b].position),i.centroid.addSelf(this.vertices[i.c].position),i.centroid.divideScalar(3)):i instanceof e.Face4&&(i.centroid.addSelf(this.vertices[i.a].position),i.centroid.addSelf(this.vertices[i.b].position),i.centroid.addSelf(this.vertices[i.c].position),i.centroid.addSelf(this.vertices[i.d].position),i.centroid.divideScalar(4))},computeNormals:function(t){var n,i,r,o,s,a,c,h,l,u,f=new e.Vector3,p=new e.Vector3;for(r=0,o=this.vertices.length;r<o;r++)this.vertices[r].normal.set(0,0,0);for(s=0,a=this.faces.length;s<a;s++)if(c=this.faces[s],t&&c.vertexNormals.length){for(f.set(0,0,0),n=0,i=c.normal.length;n<i;n++)f.addSelf(c.vertexNormals[n]);f.divideScalar(3),f.isZero()||f.normalize(),c.normal.copy(f)}else h=this.vertices[c.a],l=this.vertices[c.b],u=this.vertices[c.c],f.sub(u.position,l.position),p.sub(h.position,l.position),f.crossSelf(p),f.isZero()||f.normalize(),c.normal.copy(f)},computeBoundingBox:function(){if(this.vertices.length>0){this.bbox={x:[this.vertices[0].position.x,this.vertices[0].position.x],y:[this.vertices[0].position.y,this.vertices[0].position.y],z:[this.vertices[0].position.z,this.vertices[0].position.z]};for(var t=1,n=this.vertices.length;t<n;t++)vertex=this.vertices[t],vertex.position.x<this.bbox.x[0]?this.bbox.x[0]=vertex.position.x:vertex.position.x>this.bbox.x[1]&&(this.bbox.x[1]=vertex.position.x),vertex.position.y<this.bbox.y[0]?this.bbox.y[0]=vertex.position.y:vertex.position.y>this.bbox.y[1]&&(this.bbox.y[1]=vertex.position.y),vertex.position.z<this.bbox.z[0]?this.bbox.z[0]=vertex.position.z:vertex.position.z>this.bbox.z[1]&&(this.bbox.z[1]=vertex.position.z)}},toString:function(){return"THREE.Geometry ( vertices: "+this.vertices+", faces: "+this.faces+" )"}},e.Camera=function(t,n,i,r){this.fov=t,this.aspect=n,this.position=new e.Vector3(0,0,0),this.target={position:new e.Vector3(0,0,0)},this.projectionMatrix=e.Matrix4.makePerspective(t,n,i,r),this.up=new e.Vector3(0,1,0),this.matrix=new e.Matrix4,this.autoUpdateMatrix=!0,this.updateMatrix=function(){this.matrix.lookAt(this.position,this.target.position,this.up)},this.toString=function(){return"THREE.Camera ( "+this.position+", "+this.target.position+" )"}},e.Light=function(t){this.color=new e.Color(255<<24|t)},e.AmbientLight=function(t){e.Light.call(this,t)},e.AmbientLight.prototype=new e.Light,e.AmbientLight.prototype.constructor=e.AmbientLight,e.DirectionalLight=function(t,n){e.Light.call(this,t),this.position=new e.Vector3(0,1,0),this.intensity=n||1},e.DirectionalLight.prototype=new e.Light,e.DirectionalLight.prototype.constructor=e.DirectionalLight,e.PointLight=function(t,n){e.Light.call(this,t),this.position=new e.Vector3(0,0,0),this.intensity=n||1},e.DirectionalLight.prototype=new e.Light,e.DirectionalLight.prototype.constructor=e.PointLight,e.Object3D=function(t){this.position=new e.Vector3,this.rotation=new e.Vector3,this.scale=new e.Vector3(1,1,1),this.matrix=new e.Matrix4,this.matrixTranslation=new e.Matrix4,this.matrixRotation=new e.Matrix4,this.matrixScale=new e.Matrix4,this.screen=new e.Vector3,this.autoUpdateMatrix=!0,this.updateMatrix=function(){this.matrixPosition=e.Matrix4.translationMatrix(this.position.x,this.position.y,this.position.z),this.matrixRotation=e.Matrix4.rotationXMatrix(this.rotation.x),this.matrixRotation.multiplySelf(e.Matrix4.rotationYMatrix(this.rotation.y)),this.matrixRotation.multiplySelf(e.Matrix4.rotationZMatrix(this.rotation.z)),this.matrixScale=e.Matrix4.scaleMatrix(this.scale.x,this.scale.y,this.scale.z),this.matrix.copy(this.matrixPosition),this.matrix.multiplySelf(this.matrixRotation),this.matrix.multiplySelf(this.matrixScale)}},e.Particle=function(t){e.Object3D.call(this),this.material=t instanceof Array?t:[t],this.autoUpdateMatrix=!1},e.Particle.prototype=new e.Object3D,e.Particle.prototype.constructor=e.Particle,e.Line=function(t,n){e.Object3D.call(this),this.geometry=t,this.material=n instanceof Array?n:[n]},e.Line.prototype=new e.Object3D,e.Line.prototype.constructor=e.Line,e.Mesh=function(t,n,i){e.Object3D.call(this),this.geometry=t,this.material=n instanceof Array?n:[n],this.flipSided=!1,this.doubleSided=!1,this.overdraw=!1,this.materialFaceGroup={},this.sortFacesByMaterial(),i&&this.normalizeUVs(),this.geometry.computeBoundingBox()},e.Mesh.prototype=new e.Object3D,e.Mesh.prototype.constructor=e.Mesh,e.Mesh.prototype.sortFacesByMaterial=function(){var t,n,i,e,r,o;function s(i){for(o=[],t=0,n=i.length;t<n;t++)null==i[t]?o.push("undefined"):o.push(i[t].toString());return o.join("_")}for(i=0,e=this.geometry.faces.length;i<e;i++)r=this.geometry.faces[i].material,hash=s(r),null==this.materialFaceGroup[hash]&&(this.materialFaceGroup[hash]={faces:[],material:r}),this.materialFaceGroup[hash].faces.push(i)},e.Mesh.prototype.normalizeUVs=function(){var t,n,i,e,r;for(t=0,n=this.geometry.uvs.length;t<n;t++)for(i=0,e=(r=this.geometry.uvs[t]).length;i<e;i++)1!=r[i].u&&(r[i].u=r[i].u-Math.floor(r[i].u)),1!=r[i].v&&(r[i].v=r[i].v-Math.floor(r[i].v))},e.LineColorMaterial=function(t,n,i){this.lineWidth=i||1,this.color=new e.Color((n>=0?255*n<<24:4278190080)|t)},e.LineColorMaterial.prototype={toString:function(){return"THREE.LineColorMaterial ( color: "+this.color+", lineWidth: "+this.lineWidth+" )"}},e.MeshPhongMaterial=function(t,n,i,r,o){this.ambient=new e.Color((o>=0?255*o<<24:4278190080)|t),this.diffuse=new e.Color((o>=0?255*o<<24:4278190080)|n),this.specular=new e.Color((o>=0?255*o<<24:4278190080)|i),this.shininess=r,this.opacity=o,this.toString=function(){return"THREE.MeshPhongMaterial ( <br/>ambient: "+this.ambient+", <br/>diffuse: "+this.diffuse+", <br/>specular: "+this.specular+", <br/>shininess: "+this.shininess+", <br/>opacity: "+this.opacity+")"}},e.MeshBitmapMaterial=function(t,n){this.bitmap=t,this.mode=n||e.MeshBitmapMaterialMode.UVMAPPING,this.id=e.MeshBitmapMaterialCounter.value++,this.toString=function(){return"THREE.MeshBitmapMaterial ( bitmap: "+this.bitmap+", mode: "+this.mode+", id: "+this.id+" )"}},e.MeshBitmapMaterialCounter={value:0},e.MeshBitmapMaterialMode={UVMAPPING:0},e.MeshColorFillMaterial=function(t,n){this.color=new e.Color((n>=0?255*n<<24:4278190080)|t),this.toString=function(){return"THREE.MeshColorFillMaterial ( color: "+this.color+" )"}},e.MeshColorStrokeMaterial=function(t,n,i){this.lineWidth=i||1,this.color=new e.Color((n>=0?255*n<<24:4278190080)|t),this.toString=function(){return"THREE.MeshColorStrokeMaterial ( lineWidth: "+this.lineWidth+", color: "+this.color+" )"}},e.MeshFaceMaterial=function(){this.toString=function(){return"THREE.MeshFaceMaterial"}},e.ParticleBitmapMaterial=function(t){this.bitmap=t,this.offset=new e.Vector2,this.toString=function(){return"THREE.ParticleBitmapMaterial ( bitmap: "+this.bitmap+" )"}},e.ParticleCircleMaterial=function(t,n){this.color=new e.Color((n>=0?255*n<<24:4278190080)|t),this.toString=function(){return"THREE.ParticleCircleMaterial ( color: "+this.color+" )"}},e.ParticleDOMMaterial=function(t){this.domElement=t,this.toString=function(){return"THREE.ParticleDOMMaterial ( domElement: "+this.domElement+" )"}},e.Scene=function(){this.objects=[],this.lights=[],this.addObject=function(t){this.objects.push(t)},this.removeObject=function(t){for(var n=0,i=this.objects.length;n<i;n++)if(t==this.objects[n])return void this.objects.splice(n,1)},this.addLight=function(t){this.lights.push(t)},this.removeLight=function(t){for(var n=0,i=this.lights.length;n<i;n++)if(t==this.lights[n])return void this.lights.splice(n,1)},this.add=function(t){this.addObject(t)},this.toString=function(){return"THREE.Scene ( "+this.objects+" )"}},e.Projector=function(){var t,n,i,r,o,s,a,c,h=null,l=[],u=[],f=[],p=[],m=new e.Vector4,y=new e.Matrix4,v=new e.Matrix4;this.projectScene=function(x,g){var d,b,M,w,S,_,R,z,E,A,P,L,C,T,B,V,F,D,G;for(h=[],n=0,r=0,s=0,c=0,g.autoUpdateMatrix&&g.updateMatrix(),y.multiply(g.projectionMatrix,g.matrix),d=0,b=(R=x.objects).length;d<b;d++)if(E=(z=R[d]).matrix,z.autoUpdateMatrix&&z.updateMatrix(),z instanceof e.Mesh){for(v.multiply(y,E),M=0,w=(A=z.geometry.vertices).length;M<w;M++)(L=(P=A[M]).positionScreen).copy(P.position),v.transform(L),P.__visible=L.z>0&&L.z<1;for(S=0,_=(T=z.geometry.faces).length;S<_;S++)(B=T[S])instanceof e.Face3?(V=A[B.a],F=A[B.b],D=A[B.c],V.__visible&&F.__visible&&D.__visible&&(z.doubleSided||z.flipSided!=(D.positionScreen.x-V.positionScreen.x)*(F.positionScreen.y-V.positionScreen.y)-(D.positionScreen.y-V.positionScreen.y)*(F.positionScreen.x-V.positionScreen.x)<0)&&((t=l[n]=l[n]||new e.RenderableFace3).v1.copy(V.positionScreen),t.v2.copy(F.positionScreen),t.v3.copy(D.positionScreen),t.centroidWorld.copy(B.centroid),z.matrix.transform(t.centroidWorld),t.normalWorld.copy(B.normal),z.matrixRotation.transform(t.normalWorld),t.z=Math.max(V.positionScreen.z,Math.max(F.positionScreen.z,D.positionScreen.z)),t.meshMaterial=z.material,t.faceMaterial=B.material,t.overdraw=z.overdraw,t.uvs=z.geometry.uvs[S],t.color=B.color,h.push(t),n++)):B instanceof e.Face4&&(V=A[B.a],F=A[B.b],D=A[B.c],G=A[B.d],V.__visible&&F.__visible&&D.__visible&&G.__visible&&(z.doubleSided||z.flipSided!=((G.positionScreen.x-V.positionScreen.x)*(F.positionScreen.y-V.positionScreen.y)-(G.positionScreen.y-V.positionScreen.y)*(F.positionScreen.x-V.positionScreen.x)<0||(F.positionScreen.x-D.positionScreen.x)*(G.positionScreen.y-D.positionScreen.y)-(F.positionScreen.y-D.positionScreen.y)*(G.positionScreen.x-D.positionScreen.x)<0))&&((i=u[r]=u[r]||new e.RenderableFace4).v1.copy(V.positionScreen),i.v2.copy(F.positionScreen),i.v3.copy(D.positionScreen),i.v4.copy(G.positionScreen),i.centroidWorld.copy(B.centroid),z.matrix.transform(i.centroidWorld),i.normalWorld.copy(B.normal),z.matrixRotation.transform(i.normalWorld),i.z=Math.max(V.positionScreen.z,Math.max(F.positionScreen.z,Math.max(D.positionScreen.z,G.positionScreen.z))),i.meshMaterial=z.material,i.faceMaterial=B.material,i.overdraw=z.overdraw,i.uvs=z.geometry.uvs[S],i.color=B.color,h.push(i),r++))}else if(z instanceof e.Line)for(v.multiply(y,E),M=0,w=(A=z.geometry.vertices).length;M<w;M++)(L=(P=A[M]).positionScreen).copy(P.position),v.transform(L),P.__visible=L.z>0&&L.z<1,M>0&&(C=z.geometry.vertices[M-1],P.__visible&&C.__visible&&((o=f[s]=f[s]||new e.RenderableLine).v1.copy(P.positionScreen),o.v2.copy(C.positionScreen),o.z=Math.max(P.positionScreen.z,C.positionScreen.z),o.material=z.material,h.push(o),s++));else z instanceof e.Particle&&(m.set(z.position.x,z.position.y,z.position.z,1),g.matrix.transform(m),g.projectionMatrix.transform(m),z.screen.set(m.x/m.w,m.y/m.w,m.z/m.w),z.screen.z>0&&z.screen.z<1&&((a=p[c]=p[c]||new e.RenderableParticle).x=z.screen.x,a.y=z.screen.y,a.z=z.screen.z,a.rotation=z.rotation.z,a.scale.x=z.scale.x*Math.abs(m.x/m.w-(m.x+g.projectionMatrix.n11)/(m.w+g.projectionMatrix.n14)),a.scale.y=z.scale.y*Math.abs(m.y/m.w-(m.y+g.projectionMatrix.n22)/(m.w+g.projectionMatrix.n24)),a.material=z.material,a.color=z.color,h.push(a),c++));return h.sort((function(t,n){return n.z-t.z})),h}},e.DOMRenderer=function(){e.Renderer.call(this);var t,n,i=null,r=new e.Projector,o=document.createElement("div");this.domElement=o,this.setSize=function(i,e){t=i/2,n=e/2},this.render=function(o,s){var a,c,h,l,u,f,p,m,y;for(a=0,c=(i=r.projectScene(o,s)).length;a<c;a++)if((u=i[a])instanceof e.RenderableParticle)for(m=u.x*t+t,y=u.y*n+n,h=0,l=u.material.length;h<l;h++)(f=u.material[h])instanceof e.ParticleDOMMaterial&&((p=f.domElement).style.left=m+"px",p.style.top=y+"px")}},e.CanvasRenderer=function(){var t,n,i,r,o=null,s=new e.Projector,a=document.createElement("canvas"),c=a.getContext("2d"),h=new e.Rectangle,l=new e.Rectangle,u=new e.Rectangle,f=!1,p=new e.Color(4294967295),m=new e.Color(4294967295),y=new e.Color(4294967295),v=2*Math.PI,x=new e.Vector2,g=new e.Vector3,d=new e.UV,b=new e.UV,M=new e.UV,w=new e.UV,S=new e.Vector2,_=new e.Vector2;function R(t,n,i){var r,o,s;for(r=0,o=t.lights.length;r<o;r++)(s=t.lights[r])instanceof e.DirectionalLight?(i.r+=s.color.r,i.g+=s.color.g,i.b+=s.color.b):s instanceof e.PointLight&&(i.r+=s.color.r,i.g+=s.color.g,i.b+=s.color.b)}function z(t,n,i){var r,o,s,a;for(r=0,o=t.lights.length;r<o;r++)(s=t.lights[r])instanceof e.DirectionalLight?(a=n.normalWorld.dot(s.position)*s.intensity)>0&&(i.r+=s.color.r*a,i.g+=s.color.g*a,i.b+=s.color.b*a):s instanceof e.PointLight&&(g.sub(s.position,n.centroidWorld),g.normalize(),(a=n.normalWorld.dot(g)*s.intensity)>0&&(i.r+=s.color.r*a,i.g+=s.color.g*a,i.b+=s.color.b*a))}function E(t,n,o,s,a){var l,x,g,d,b,M,w,S,_;if(s instanceof e.ParticleCircleMaterial){if(f?(m.copyRGB(y),R(a,0,m),p.copyRGBA(s.color),p.multiplySelfRGB(m),p.updateStyleString()):p=s.color,l=o.scale.x*i,x=o.scale.y*r,u.set(t-l,n-x,t+l,n+x),!h.instersects(u))return;c.save(),c.translate(t,n),c.rotate(-o.rotation),c.scale(l,x),c.beginPath(),c.arc(0,0,1,0,v,!0),c.closePath(),c.fillStyle=p.__styleString,c.fill(),c.restore()}else if(s instanceof e.ParticleBitmapMaterial){if(S=(w=s.bitmap).width/2,_=w.height/2,l=(g=o.scale.x*i)*S,x=(d=o.scale.y*r)*_,b=s.offset.x*g,M=s.offset.y*d,u.set(t+b-l,n+M-x,t+b+l,n+M+x),!h.instersects(u))return;c.save(),c.translate(t,n),c.rotate(-o.rotation),c.scale(g,-d),c.translate(-S+s.offset.x,-_-s.offset.y),c.drawImage(w,0,0),c.restore()}}function A(t,n,i,r,o,s,a){s instanceof e.LineColorMaterial&&(f?(m.copyRGB(y),R(a,0,m),p.copyRGBA(s.color),p.multiplySelfRGB(m),p.updateStyleString()):p=s.color,c.lineWidth=s.lineWidth,c.lineJoin="round",c.lineCap="round",c.strokeStyle=p.__styleString,c.stroke(),u.inflate(c.lineWidth))}function P(t,n,i,r,o,s,a,h,l){var v,x,g;h instanceof e.MeshColorFillMaterial?(f?(m.copyRGB(y),z(l,a,m),p.copyRGBA(h.color),p.multiplySelfRGB(m),p.updateStyleString()):p=h.color,c.beginPath(),c.moveTo(t,n),c.lineTo(i,r),c.lineTo(o,s),c.lineTo(t,n),c.closePath(),c.fillStyle=p.__styleString,c.fill()):h instanceof e.MeshColorStrokeMaterial?(f?(m.copyRGB(y),z(l,a,m),p.copyRGBA(h.color),p.multiplySelfRGB(m),p.updateStyleString()):p=h.color,c.beginPath(),c.moveTo(t,n),c.lineTo(i,r),c.lineTo(o,s),c.lineTo(t,n),c.closePath(),c.lineWidth=h.lineWidth,c.lineJoin="round",c.lineCap="round",c.strokeStyle=p.__styleString,c.stroke(),u.inflate(c.lineWidth)):h instanceof e.MeshBitmapMaterial&&(x=(v=h.bitmap).width-1,g=v.height-1,d.copy(a.uvs[0]),b.copy(a.uvs[1]),M.copy(a.uvs[2]),d.u*=x,d.v*=g,b.u*=x,b.v*=g,M.u*=x,M.v*=g,C(v,t,n,i,r,o,s,d.u,d.v,b.u,b.v,M.u,M.v))}function L(t,n,i,r,o,s,a,h,l,v,x,g,S,_,R){var E,A,P;_ instanceof e.MeshColorFillMaterial?(f?(m.copyRGB(y),z(R,S,m),p.copyRGBA(_.color),p.multiplySelfRGB(m),p.updateStyleString()):p=_.color,c.beginPath(),c.moveTo(t,n),c.lineTo(i,r),c.lineTo(o,s),c.lineTo(a,h),c.lineTo(t,n),c.closePath(),c.fillStyle=p.__styleString,c.fill()):_ instanceof e.MeshColorStrokeMaterial?(f?(m.copyRGB(y),z(R,S,m),p.copyRGBA(_.color),p.multiplySelfRGB(m),p.updateStyleString()):p=_.color,c.beginPath(),c.moveTo(t,n),c.lineTo(i,r),c.lineTo(o,s),c.lineTo(a,h),c.lineTo(t,n),c.closePath(),c.lineWidth=_.lineWidth,c.lineJoin="round",c.lineCap="round",c.strokeStyle=p.__styleString,c.stroke(),u.inflate(c.lineWidth)):_ instanceof e.MeshBitmapMaterial&&(A=(E=_.bitmap).width-1,P=E.height-1,d.copy(S.uvs[0]),b.copy(S.uvs[1]),M.copy(S.uvs[2]),w.copy(S.uvs[3]),d.u*=A,d.v*=P,b.u*=A,b.v*=P,M.u*=A,M.v*=P,w.u*=A,w.v*=P,C(E,t,n,i,r,a,h,d.u,d.v,b.u,b.v,w.u,w.v),C(E,l,v,o,s,x,g,b.u,b.v,M.u,M.v,w.u,w.v))}function C(t,n,i,e,r,o,s,a,h,l,u,f,p){var m,y,v,x,g,d,b;c.beginPath(),c.moveTo(n,i),c.lineTo(e,r),c.lineTo(o,s),c.lineTo(n,i),c.closePath(),c.save(),c.clip(),y=-(h*(o-e)-u*o+p*e+(u-p)*n)/(m=a*(p-u)-l*p+f*u+(l-f)*h),v=(u*s+h*(r-s)-p*r+(p-u)*i)/m,x=(a*(o-e)-l*o+f*e+(l-f)*n)/m,g=-(l*s+a*(r-s)-f*r+(f-l)*i)/m,d=(a*(p*e-u*o)+h*(l*o-f*e)+(f*u-l*p)*n)/m,b=(a*(p*r-u*s)+h*(l*s-f*r)+(f*u-l*p)*i)/m,c.transform(y,v,x,g,d,b),c.drawImage(t,0,0),c.restore()}function T(t,n){x.sub(n,t),x.unit(),x.multiplyScalar(.75),n.addSelf(x),t.subSelf(x)}this.domElement=a,this.autoClear=!0,this.setSize=function(e,o){i=(t=e)/2,r=(n=o)/2,a.width=t,a.height=n,h.set(-i,-r,i,r)},this.clear=function(){l.isEmpty()||(l.inflate(1),l.minSelf(h),c.setTransform(1,0,0,-1,i,r),c.clearRect(l.getX(),l.getY(),l.getWidth(),l.getHeight()),l.empty())},this.render=function(t,n){var a,p,m,v,x,g,d,b,M,w,R,z,C,B,V,F,D,G,U,j;for(this.autoClear&&this.clear(),o=s.projectScene(t,n),c.setTransform(1,0,0,-1,i,r),(f=t.lights.length>0)&&function(t,n){var i,r,o;for(n.setRGBA(1,1,1,1),i=0,r=t.lights.length;i<r;i++)(o=t.lights[i])instanceof e.AmbientLight&&(n.r*=o.color.r,n.g*=o.color.g,n.b*=o.color.b)}(t,y),a=0,p=o.length;a<p;a++){if(m=o[a],u.empty(),m instanceof e.RenderableParticle)for(M=m.x*i,w=m.y*r,v=0,x=m.material.length;v<x;v++)E(M,w,m,b=m.material[v],t);else if(m instanceof e.RenderableLine){if(M=m.v1.x*i,w=m.v1.y*r,R=m.v2.x*i,z=m.v2.y*r,u.addPoint(M,w),u.addPoint(R,z),!h.instersects(u))continue;for(c.beginPath(),c.moveTo(M,w),c.lineTo(R,z),c.closePath(),v=0,x=m.material.length;v<x;v++)A(M,w,R,z,m,b=m.material[v],t)}else if(m instanceof e.RenderableFace3){if(m.v1.x*=i,m.v1.y*=r,m.v2.x*=i,m.v2.y*=r,m.v3.x*=i,m.v3.y*=r,m.overdraw&&(T(m.v1,m.v2),T(m.v2,m.v3),T(m.v3,m.v1)),M=m.v1.x,w=m.v1.y,R=m.v2.x,z=m.v2.y,C=m.v3.x,B=m.v3.y,u.addPoint(M,w),u.addPoint(R,z),u.addPoint(C,B),!h.instersects(u))continue;for(v=0,x=m.meshMaterial.length;v<x;)if((b=m.meshMaterial[v++])instanceof e.MeshFaceMaterial)for(g=0,d=m.faceMaterial.length;g<d;)P(M,w,R,z,C,B,m,b=m.faceMaterial[g++],t);else P(M,w,R,z,C,B,m,b,t)}else if(m instanceof e.RenderableFace4){if(m.v1.x*=i,m.v1.y*=r,m.v2.x*=i,m.v2.y*=r,m.v3.x*=i,m.v3.y*=r,m.v4.x*=i,m.v4.y*=r,S.copy(m.v2),_.copy(m.v4),m.overdraw&&(T(m.v1,m.v2),T(m.v2,m.v4),T(m.v4,m.v1)),M=m.v1.x,w=m.v1.y,R=m.v2.x,z=m.v2.y,V=m.v4.x,F=m.v4.y,m.overdraw&&(T(m.v3,S),T(m.v3,_)),C=m.v3.x,B=m.v3.y,D=S.x,G=S.y,U=_.x,j=_.y,u.addPoint(M,w),u.addPoint(R,z),u.addPoint(C,B),u.addPoint(V,F),!h.instersects(u))continue;for(v=0,x=m.meshMaterial.length;v<x;)if((b=m.meshMaterial[v++])instanceof e.MeshFaceMaterial)for(g=0,d=m.faceMaterial.length;g<d;)L(M,w,R,z,C,B,V,F,D,G,U,j,m,b=m.faceMaterial[g++],t);else L(M,w,R,z,C,B,V,F,D,G,U,j,m,b,t)}l.addRectangle(u)}c.setTransform(1,0,0,1,0,0)}},e.SVGRenderer=function(){var t,n,i,r,o,s,a,c=null,h=new e.Projector,l=document.createElementNS("http://www.w3.org/2000/svg","svg"),u=new e.Rectangle,f=new e.Rectangle,p=!1,m=new e.Color(4294967295),y=new e.Color(4294967295),v=new e.Color(4294967295),x=new e.Vector3,g=[],d=[],b=1;function M(t,n,i){var r,o,s,a;for(r=0,o=t.lights.length;r<o;r++)(s=t.lights[r])instanceof e.DirectionalLight?(a=n.normalWorld.dot(s.position)*s.intensity)>0&&(i.r+=s.color.r*a,i.g+=s.color.g*a,i.b+=s.color.b*a):s instanceof e.PointLight&&(x.sub(s.position,n.centroidWorld),x.normalize(),(a=n.normalWorld.dot(x)*s.intensity)>0&&(i.r+=s.color.r*a,i.g+=s.color.g*a,i.b+=s.color.b*a))}function w(t,n,r,s,c){(o=function(t){if(null==d[t])return d[t]=document.createElementNS("http://www.w3.org/2000/svg","circle"),0==b&&d[t].setAttribute("shape-rendering","crispEdges"),d[t];return d[t]}(a++)).setAttribute("cx",t),o.setAttribute("cy",n),o.setAttribute("r",r.scale.x*i),s instanceof e.ParticleCircleMaterial&&(p?(y.copyRGB(v),function(t,n,i){var r,o,s;for(r=0,o=t.lights.length;r<o;r++)(s=t.lights[r])instanceof e.DirectionalLight?(i.r+=s.color.r,i.g+=s.color.g,i.b+=s.color.b):s instanceof e.PointLight&&(i.r+=s.color.r,i.g+=s.color.g,i.b+=s.color.b)}(c,0,y),m.copyRGBA(s.color),m.multiplySelfRGB(y),m.updateStyleString()):m=s.color,o.setAttribute("style","fill: "+m.__styleString)),l.appendChild(o)}function S(t,n,i,r,a,c,h,u,f){(o=R(s++)).setAttribute("d","M "+t+" "+n+" L "+i+" "+r+" L "+a+","+c+"z"),u instanceof e.MeshColorFillMaterial?(p?(y.copyRGB(v),M(f,h,y),m.copyRGBA(u.color),m.multiplySelfRGB(y),m.updateStyleString()):m=u.color,o.setAttribute("style","fill: "+m.__styleString)):u instanceof e.MeshColorStrokeMaterial&&(p?(y.copyRGB(v),M(f,h,y),m.copyRGBA(u.color),m.multiplySelfRGB(y),m.updateStyleString()):m=u.color,o.setAttribute("style","fill: none; stroke: "+m.__styleString+"; stroke-width: "+u.lineWidth+"; stroke-linecap: round; stroke-linejoin: round")),l.appendChild(o)}function _(t,n,i,r,a,c,h,u,f,x,g){(o=R(s++)).setAttribute("d","M "+t+" "+n+" L "+i+" "+r+" L "+a+","+c+" L "+h+","+u+"z"),x instanceof e.MeshColorFillMaterial?(p?(y.copyRGB(v),M(g,f,y),m.copyRGBA(x.color),m.multiplySelfRGB(y),m.updateStyleString()):m=x.color,o.setAttribute("style","fill: "+m.__styleString)):x instanceof e.MeshColorStrokeMaterial&&(p?(y.copyRGB(v),M(g,f,y),m.copyRGBA(x.color),m.multiplySelfRGB(y),m.updateStyleString()):m=x.color,o.setAttribute("style","fill: none; stroke: "+m.__styleString+"; stroke-width: "+x.lineWidth+"; stroke-linecap: round; stroke-linejoin: round")),l.appendChild(o)}function R(t){return null==g[t]?(g[t]=document.createElementNS("http://www.w3.org/2000/svg","path"),0==b&&g[t].setAttribute("shape-rendering","crispEdges"),g[t]):g[t]}this.domElement=l,this.autoClear=!0,this.setQuality=function(t){switch(t){case"high":b=1;break;case"low":b=0}},this.setSize=function(e,o){i=(t=e)/2,r=(n=o)/2,l.setAttribute("viewBox",-i+" "+-r+" "+t+" "+n),l.setAttribute("width",t),l.setAttribute("height",n),u.set(-i,-r,i,r)},this.clear=function(){for(;l.childNodes.length>0;)l.removeChild(l.childNodes[0])},this.render=function(t,n){var o,l,m,y,x,g,d,b,M,R,z,E,A,P,L,C;for(this.autoClear&&this.clear(),c=h.projectScene(t,n),s=0,a=0,(p=t.lights.length>0)&&function(t,n){var i,r,o;for(n.setRGBA(1,1,1,1),i=0,r=t.lights.length;i<r;i++)(o=t.lights[i])instanceof e.AmbientLight&&(n.r*=o.color.r,n.g*=o.color.g,n.b*=o.color.b)}(t,v),o=0,l=c.length;o<l;o++)if(d=c[o],f.empty(),d instanceof e.RenderableParticle)for(M=d.x*i,R=d.y*-r,m=0,y=d.material.length;m<y;m++)w(M,R,d,b=d.material[m],t);else if(d instanceof e.RenderableFace3){if(M=d.v1.x*i,R=d.v1.y*-r,z=d.v2.x*i,E=d.v2.y*-r,A=d.v3.x*i,P=d.v3.y*-r,f.addPoint(M,R),f.addPoint(z,E),f.addPoint(A,P),!u.instersects(f))continue;for(m=0,y=d.meshMaterial.length;m<y;)if((b=d.meshMaterial[m++])instanceof e.MeshFaceMaterial)for(x=0,g=d.faceMaterial.length;x<g;)S(M,R,z,E,A,P,d,b=d.faceMaterial[x++],t);else S(M,R,z,E,A,P,d,b,t)}else if(d instanceof e.RenderableFace4){if(M=d.v1.x*i,R=d.v1.y*-r,z=d.v2.x*i,E=d.v2.y*-r,A=d.v3.x*i,P=d.v3.y*-r,L=d.v4.x*i,C=d.v4.y*-r,f.addPoint(M,R),f.addPoint(z,E),f.addPoint(A,P),f.addPoint(L,C),!u.instersects(f))continue;for(m=0,y=d.meshMaterial.length;m<y;)if((b=d.meshMaterial[m++])instanceof e.MeshFaceMaterial)for(x=0,g=d.faceMaterial.length;x<g;)_(M,R,z,E,A,P,L,C,d,b=d.faceMaterial[x++],t);else _(M,R,z,E,A,P,L,C,d,b,t)}}},e.WebGLRenderer=function(){var t,n,i,r=document.createElement("canvas"),o=new e.Matrix4;function s(n,i){var e;return"fragment"==n?e=t.createShader(t.FRAGMENT_SHADER):"vertex"==n&&(e=t.createShader(t.VERTEX_SHADER)),t.shaderSource(e,i),t.compileShader(e),t.getShaderParameter(e,t.COMPILE_STATUS)?e:(alert(t.getShaderInfoLog(e)),null)}this.domElement=r,this.autoClear=!0,function(){try{t=r.getContext("experimental-webgl",{antialias:!0})}catch(t){}if(!t)throw alert("WebGL not supported"),"cannot create webgl context";t.clearColor(0,0,0,1),t.clearDepth(1),t.enable(t.DEPTH_TEST),t.depthFunc(t.LEQUAL),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.clearColor(0,0,0,0)}(),function(){n=t.createProgram(),t.attachShader(n,s("fragment",["#ifdef GL_ES","precision highp float;","#endif","uniform sampler2D diffuse;","uniform vec4 uniformColor;","varying vec2 vertexUv;","varying vec3 lightWeighting;","varying vec3 vNormal;","uniform int material;","uniform vec4 mAmbient;","uniform vec4 mDiffuse;","uniform vec4 mSpecular;","uniform float mShininess;","varying vec3 pLightVectorPoint;","varying vec3 pLightVectorDirection;","varying vec3 pViewPosition;","void main(){","if(material==3) { ","vec3 lightVectorPoint = normalize(pLightVectorPoint);","vec3 lightVectorDir = normalize(pLightVectorDirection);","vec3 normal = normalize(vNormal);","vec3 viewPosition = normalize(pViewPosition);","vec3 halfVectorPoint = normalize(pLightVectorPoint + pViewPosition);","float dotNormalHalfPoint = dot(normal, halfVectorPoint);","float ambientCompPoint = 1.0;","float diffuseCompPoint = max(dot(normal, lightVectorPoint), 0.0);","float specularCompPoint = pow(dotNormalHalfPoint, mShininess);","vec4 ambientPoint  = mAmbient * ambientCompPoint;","vec4 diffusePoint  = mDiffuse * diffuseCompPoint;","vec4 specularPoint = mSpecular * specularCompPoint;","vec3 halfVectorDir = normalize(pLightVectorDirection + pViewPosition);","float dotNormalHalfDir = dot(normal, halfVectorDir);","float ambientCompDir = 1.0;","float diffuseCompDir = max(dot(normal, lightVectorDir), 0.0);","float specularCompDir = pow(dotNormalHalfDir, mShininess);","vec4 ambientDir  = mAmbient * ambientCompDir;","vec4 diffuseDir  = mDiffuse * diffuseCompDir;","vec4 specularDir = mSpecular * specularCompDir;","vec4 pointLight = ambientPoint + diffusePoint + specularPoint;","vec4 dirLight = ambientDir + diffuseDir + specularDir;","gl_FragColor = vec4((pointLight.xyz + dirLight.xyz) * lightWeighting, 1.0);","} else if(material==2) {","vec4 texelColor = texture2D(diffuse, vertexUv);","gl_FragColor = vec4(texelColor.rgb * lightWeighting, texelColor.a);","} else if(material==1) {","gl_FragColor = vec4(uniformColor.rgb * lightWeighting, uniformColor.a);","} else {","gl_FragColor = vec4(uniformColor.rgb * lightWeighting, uniformColor.a);","}","}"].join("\n"))),t.attachShader(n,s("vertex",["attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","uniform bool enableLighting;","uniform vec3 ambientColor;","uniform vec3 directionalColor;","uniform vec3 lightingDirection;","uniform vec3 pointColor;","uniform vec3 pointPosition;","uniform mat4 objMatrix;","uniform mat4 viewMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat3 normalMatrix;","varying vec4 vertexColor;","varying vec2 vertexUv;","varying vec3 lightWeighting;","varying vec3 vNormal;","varying vec3 pLightVectorPoint;","varying vec3 pLightVectorDirection;","varying vec3 pViewPosition;","uniform vec3 cameraPosition;","void main(void) {","vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );","vec3 transformedNormal = normalize(normalMatrix * normal);","vec4 lPosition = viewMatrix * vec4( pointPosition, 1.0 );","vec4 lDirection = viewMatrix * vec4( lightingDirection, 0.0 );","pLightVectorPoint = normalize(pointPosition.xyz - position.xyz);","pLightVectorDirection = normalize(lDirection.xyz);","vec4 mPosition = objMatrix * vec4( position, 1.0 );","pViewPosition = cameraPosition - mPosition.xyz;","if(!enableLighting) {","lightWeighting = vec3(1.0, 1.0, 1.0);","} else {","vec3 pointLight = normalize(lPosition.xyz - mvPosition.xyz);","float directionalLightWeighting = max(dot(transformedNormal, normalize(lDirection.xyz)), 0.0);","float pointLightWeighting = max(dot(transformedNormal, pointLight), 0.0);","lightWeighting = ambientColor + directionalColor * directionalLightWeighting + pointColor * pointLightWeighting;","}","vNormal = transformedNormal;","vertexUv = uv;","gl_Position = projectionMatrix * mvPosition;","}"].join("\n"))),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||alert("Could not initialise shaders");t.useProgram(n),n.viewMatrix=t.getUniformLocation(n,"viewMatrix"),n.modelViewMatrix=t.getUniformLocation(n,"modelViewMatrix"),n.projectionMatrix=t.getUniformLocation(n,"projectionMatrix"),n.normalMatrix=t.getUniformLocation(n,"normalMatrix"),n.objMatrix=t.getUniformLocation(n,"objMatrix"),n.enableLighting=t.getUniformLocation(n,"enableLighting"),n.ambientColor=t.getUniformLocation(n,"ambientColor"),n.directionalColor=t.getUniformLocation(n,"directionalColor"),n.lightingDirection=t.getUniformLocation(n,"lightingDirection"),n.pointColor=t.getUniformLocation(n,"pointColor"),n.pointPosition=t.getUniformLocation(n,"pointPosition"),n.material=t.getUniformLocation(n,"material"),n.uniformColor=t.getUniformLocation(n,"uniformColor"),n.mAmbient=t.getUniformLocation(n,"mAmbient"),n.mDiffuse=t.getUniformLocation(n,"mDiffuse"),n.mSpecular=t.getUniformLocation(n,"mSpecular"),n.mShininess=t.getUniformLocation(n,"mShininess"),n.cameraPosition=t.getUniformLocation(n,"cameraPosition"),n.position=t.getAttribLocation(n,"position"),t.enableVertexAttribArray(n.position),n.normal=t.getAttribLocation(n,"normal"),t.enableVertexAttribArray(n.normal),n.uv=t.getAttribLocation(n,"uv"),t.enableVertexAttribArray(n.uv),n.diffuse=t.getUniformLocation(n,"diffuse"),t.uniform1i(n.diffuse,0),n.viewMatrixArray=new Float32Array(16),n.modelViewMatrixArray=new Float32Array(16),n.projectionMatrixArray=new Float32Array(16)}(),this.setSize=function(n,i){r.width=n,r.height=i,t.viewport(0,0,r.width,r.height)},this.clear=function(){t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)},this.setupLights=function(i){var r,o,s,a,c,h;for(t.uniform1i(n.enableLighting,i.lights.length),r=0,o=i.lights.length;r<o;r++)(h=i.lights[r])instanceof e.AmbientLight?(s=h.color,t.uniform3f(n.ambientColor,s.r,s.g,s.b)):h instanceof e.DirectionalLight?(s=h.color,a=h.position,c=h.intensity,t.uniform3f(n.lightingDirection,a.x,a.y,a.z),t.uniform3f(n.directionalColor,s.r*c,s.g*c,s.b*c)):h instanceof e.PointLight&&(s=h.color,a=h.position,c=h.intensity,t.uniform3f(n.pointPosition,a.x,a.y,a.z),t.uniform3f(n.pointColor,s.r*c,s.g*c,s.b*c))},this.createBuffers=function(n,i){var r,o,s,a,c,h,l,u,f,p,m,y=n.materialFaceGroup[i],v=[],x=[],g=[],d=[],b=[],M=0;for(r=0,o=y.faces.length;r<o;r++)s=y.faces[r],c=(a=n.geometry.faces[s]).vertexNormals,h=a.normal,l=n.geometry.uvs[s],a instanceof e.Face3?(u=n.geometry.vertices[a.a].position,f=n.geometry.vertices[a.b].position,p=n.geometry.vertices[a.c].position,g.push(u.x,u.y,u.z),g.push(f.x,f.y,f.z),g.push(p.x,p.y,p.z),3==c.length?(d.push(c[0].x,c[0].y,c[0].z),d.push(c[1].x,c[1].y,c[1].z),d.push(c[2].x,c[2].y,c[2].z)):(d.push(h.x,h.y,h.z),d.push(h.x,h.y,h.z),d.push(h.x,h.y,h.z)),l&&(b.push(l[0].u,l[0].v),b.push(l[1].u,l[1].v),b.push(l[2].u,l[2].v)),v.push(M,M+1,M+2),x.push(M,M+1),x.push(M,M+2),x.push(M+1,M+2),M+=3):a instanceof e.Face4&&(u=n.geometry.vertices[a.a].position,f=n.geometry.vertices[a.b].position,p=n.geometry.vertices[a.c].position,m=n.geometry.vertices[a.d].position,g.push(u.x,u.y,u.z),g.push(f.x,f.y,f.z),g.push(p.x,p.y,p.z),g.push(m.x,m.y,m.z),4==c.length?(d.push(c[0].x,c[0].y,c[0].z),d.push(c[1].x,c[1].y,c[1].z),d.push(c[2].x,c[2].y,c[2].z),d.push(c[3].x,c[3].y,c[3].z)):(d.push(h.x,h.y,h.z),d.push(h.x,h.y,h.z),d.push(h.x,h.y,h.z),d.push(h.x,h.y,h.z)),l&&(b.push(l[0].u,l[0].v),b.push(l[1].u,l[1].v),b.push(l[2].u,l[2].v),b.push(l[3].u,l[3].v)),v.push(M,M+1,M+2),v.push(M,M+2,M+3),x.push(M,M+1),x.push(M,M+2),x.push(M,M+3),x.push(M+1,M+2),x.push(M+2,M+3),M+=4);g.length&&(y.__webGLVertexBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,y.__webGLVertexBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(g),t.STATIC_DRAW),y.__webGLNormalBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,y.__webGLNormalBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(d),t.STATIC_DRAW),y.__webGLUVBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,y.__webGLUVBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(b),t.STATIC_DRAW),y.__webGLFaceBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,y.__webGLFaceBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(v),t.STATIC_DRAW),y.__webGLLineBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,y.__webGLLineBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(x),t.STATIC_DRAW),y.__webGLFaceCount=v.length,y.__webGLLineCount=x.length)},this.renderBuffer=function(i,r){i instanceof e.MeshPhongMaterial?(mAmbient=i.ambient,mDiffuse=i.diffuse,mSpecular=i.specular,t.uniform4f(n.mAmbient,mAmbient.r,mAmbient.g,mAmbient.b,i.opacity),t.uniform4f(n.mDiffuse,mDiffuse.r,mDiffuse.g,mDiffuse.b,i.opacity),t.uniform4f(n.mSpecular,mSpecular.r,mSpecular.g,mSpecular.b,i.opacity),t.uniform1f(n.mShininess,i.shininess),t.uniform1i(n.material,3)):i instanceof e.MeshColorFillMaterial?(color=i.color,t.uniform4f(n.uniformColor,color.r*color.a,color.g*color.a,color.b*color.a,color.a),t.uniform1i(n.material,0)):i instanceof e.MeshColorStrokeMaterial?(lineWidth=i.lineWidth,color=i.color,t.uniform4f(n.uniformColor,color.r*color.a,color.g*color.a,color.b*color.a,color.a),t.uniform1i(n.material,1)):i instanceof e.MeshBitmapMaterial&&(!i.__webGLTexture&&i.loaded&&(i.__webGLTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,i.__webGLTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i.bitmap),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameterCanvasRendereri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(t.TEXTURE_2D),t.bindTexture(t.TEXTURE_2D,null)),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i.__webGLTexture),t.uniform1i(n.diffuse,0),t.uniform1i(n.material,2)),t.bindBuffer(t.ARRAY_BUFFER,r.__webGLVertexBuffer),t.vertexAttribPointer(n.position,3,t.FLOAT,!1,0,0),t.bindBuffer(t.ARRAY_BUFFER,r.__webGLNormalBuffer),t.vertexAttribPointer(n.normal,3,t.FLOAT,!1,0,0),i instanceof e.MeshBitmapMaterial?(t.bindBuffer(t.ARRAY_BUFFER,r.__webGLUVBuffer),t.enableVertexAttribArray(n.uv),t.vertexAttribPointer(n.uv,2,t.FLOAT,!1,0,0)):t.disableVertexAttribArray(n.uv),i instanceof e.MeshBitmapMaterial||i instanceof e.MeshColorFillMaterial||i instanceof e.MeshPhongMaterial?(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.__webGLFaceBuffer),t.drawElements(t.TRIANGLES,r.__webGLFaceCount,t.UNSIGNED_SHORT,0)):i instanceof e.MeshColorStrokeMaterial&&(t.lineWidth(lineWidth),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r.__webGLLineBuffer),t.drawElements(t.LINES,r.__webGLLineCount,t.UNSIGNED_SHORT,0))},this.renderMesh=function(t,n){var i,r,o,s,a,c,h,l;for(a in t.materialFaceGroup)for((l=t.materialFaceGroup[a]).__webGLVertexBuffer||this.createBuffers(t,a),o=0,s=t.material.length;o<s;o++)if((h=t.material[o])instanceof e.MeshFaceMaterial)for(i=0,r=l.material.length;i<r;i++)c=l.material[i],this.renderBuffer(c,l);else c=h,this.renderBuffer(c,l)},this.setupMatrices=function(r,s){r.autoUpdateMatrix&&r.updateMatrix(),o.multiply(s.matrix,r.matrix),n.viewMatrixArray=new Float32Array(s.matrix.flatten()),n.modelViewMatrixArray=new Float32Array(o.flatten()),n.projectionMatrixArray=new Float32Array(s.projectionMatrix.flatten()),i=e.Matrix4.makeInvert3x3(o).transpose(),n.normalMatrixArray=new Float32Array(i.m),t.uniformMatrix4fv(n.viewMatrix,!1,n.viewMatrixArray),t.uniformMatrix4fv(n.modelViewMatrix,!1,n.modelViewMatrixArray),t.uniformMatrix4fv(n.projectionMatrix,!1,n.projectionMatrixArray),t.uniformMatrix3fv(n.normalMatrix,!1,n.normalMatrixArray),t.uniformMatrix4fv(n.objMatrix,!1,new Float32Array(r.matrix.flatten()))},this.render=function(i,r){var o,s,a;for(this.autoClear&&this.clear(),r.autoUpdateMatrix&&r.updateMatrix(),t.uniform3f(n.cameraPosition,r.position.x,r.position.y,r.position.z),this.setupLights(i),o=0,s=i.objects.length;o<s;o++)a=i.objects[o],this.setupMatrices(a,r),a instanceof e.Mesh?this.renderMesh(a,r):a instanceof e.Line||e.Particle}},e.RenderableFace3=function(){this.v1=new e.Vector2,this.v2=new e.Vector2,this.v3=new e.Vector2,this.centroidWorld=new e.Vector3,this.normalWorld=new e.Vector3,this.z=null,this.color=null,this.material=null},e.RenderableFace4=function(){this.v1=new e.Vector2,this.v2=new e.Vector2,this.v3=new e.Vector2,this.v4=new e.Vector2,this.centroidWorld=new e.Vector3,this.normalWorld=new e.Vector3,this.z=null,this.color=null,this.material=null},e.RenderableParticle=function(){this.x=null,this.y=null,this.z=null,this.rotation=null,this.scale=new e.Vector2,this.color=null,this.material=null},e.RenderableLine=function(){this.v1=new e.Vector2,this.v2=new e.Vector2,this.z=null,this.color=null,this.material=null};var r=e,o={name:"waves",data:function(){return{SCREEN_WIDTH:"",SCREEN_HEIGHT:""}},methods:{liziInit:function(){var t,n,i,e,o,s,a,c=window.innerWidth,h=window.innerHeight,l=120,u=50,f=30,p=0,m=window.innerWidth/2,y=window.innerHeight/2;function v(t){p=t.clientX-m,t.clientY-y}function x(t){1==t.touches.length&&(t.preventDefault(),p=t.touches[0].pageX-m,t.touches[0].pageY-y)}!function(){(t=document.createElement("div")).style.position="relative",t.style.top="0px",document.getElementById("dynamicWaves").appendChild(t),(o=new r.Camera(75,c/h,1,1e4)).position.z=900,s=new r.Scene,(a=new r.CanvasRenderer).setSize(c,h),n=new Array;for(var p=0,m=new r.ParticleCircleMaterial(16777215,1),y=0;y<u;y++)for(var g=0;g<f;g++)(i=n[p++]=new r.Particle(m)).position.x=y*l-u*l/2,i.position.z=g*l-f*l/2,s.add(i);e=0,t.appendChild(a.domElement),document.getElementById("dynamicWaves").addEventListener("mousemove",v,!1),document.getElementById("dynamicWaves").addEventListener("touchmove",x,!1)}(),function t(){o.position.x+=.05*(p-o.position.x),o.position.y=364;for(var r=0,c=0;c<u;c++)for(var h=0;h<f;h++)(i=n[r++]).position.y=50*Math.sin(.3*(c+e))+50*Math.sin(.5*(h+e)),i.scale.x=i.scale.y=2*(Math.sin(.3*(c+e))+1)+2*(Math.sin(.5*(h+e))+1);a.render(s,o),e+=.1,window.requestAnimationFrame(t)}()}},mounted:function(){this.SCREEN_WIDTH=window.innerWidth,this.SCREEN_HEIGHT=window.SCREEN_HEIGHT,this.liziInit()}},s=(i(124),i(0)),a=Object(s.a)(o,(function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"dynamic",style:{height:this.SCREEN_HEIGHT}},[n("div",{attrs:{id:"dynamicWaves"}})])}),[],!1,null,"41f1cdc1",null);n.default=a.exports}]]);